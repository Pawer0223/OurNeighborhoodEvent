<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="userInfos">

	<resultMap id="userInfosModel" type="woodong2.vo.common.UserInfos">
		<result property="userId" column="USER_ID" />
		<result property="userNm" column="USER_NM" />
		<result property="neighbor" column="NEIGHBOR" />
		<result property="userGbnCd" column="USER_GBN_CD" />
		<result property="ptnCd" column="PTN_CD" />
		<result property="profilePic" column="PROFILE_PIC" />
	</resultMap>

	<select id="duplicateCheck" parameterType="String" resultType="java.lang.Integer">
		<![CDATA[	  
		SELECT 1 FROM USER_INFOS
		WHERE USER_ID=#{ inputId }
		]]>
	</select>

	<insert id="registUser" parameterType="woodong2.vo.common.UserInfos">
		<![CDATA[
		INSERT INTO USER_INFOS 
		VALUES ( #{ userId }
			    ,#{ userPw } 
			   	,#{ userNm }
			   	,#{ neighbor }
			   	,'NOR'
			   	,''
			   	,#{ email }
			   	,#{ profilePic }
			   	,#{ phoneNum }
			   	,''
			   	,0
			   	,''
			   	,''
			   	,SYSDATE
			   	,'' 
			   	)
		]]>
	</insert>

	<select id="login" parameterType="woodong2.vo.common.UserInfos" resultMap="userInfosModel">
	<![CDATA[
	 SELECT USER_ID,USER_NM,NEIGHBOR,USER_GBN_CD,PTN_CD,PROFILE_PIC
		 FROM USER_INFOS
		 WHERE USER_ID = #{ userId }
		 AND USER_PW = #{ userPw }
	]]>
	</select>

	<update id="updatePtnCd" parameterType="woodong2.vo.common.UserInfos">
	<![CDATA[
		UPDATE 
			USER_INFOS SET PTN_CD = #{ ptnCd }
		  , USER_GBN_CD='PTN'
		  , UPDATE_DATE = SYSDATE
		WHERE USER_ID = #{ userId }
	]]>	
	</update>

</mapper>
