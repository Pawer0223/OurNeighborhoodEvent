-- Table Create SQL
CREATE TABLE KTS_DEV.PTN_INFOS
(
    PTN_CD           VARCHAR2(10)     NOT NULL, 
    BIZR_REG_NO      VARCHAR2(32)     NOT NULL, 
    PTN_NM           VARCHAR2(100)    NOT NULL, 
    RPST_NM          VARCHAR2(100)    NOT NULL, 
    RPST_TEL         VARCHAR2(15)     NOT NULL, 
    FAX_NO           VARCHAR2(20)     NULL, 
    ADD_NO           VARCHAR2(10)     NOT NULL, 
    NEIGHBOR         VARCHAR2(500)    NOT NULL, 
    CREATION_DATE    DATE             NOT NULL, 
    UPDATE_DATE      DATE             NULL, 
    CONSTRAINT PTN_INFOS_PK PRIMARY KEY (PTN_CD)
)
/

COMMENT ON TABLE KTS_DEV.PTN_INFOS IS '사업자정보'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.PTN_CD IS '사업자ID'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.BIZR_REG_NO IS '사업자등록번호'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.PTN_NM IS '사업자명'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.RPST_NM IS '대표자명'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.RPST_TEL IS '대표전화번호'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.FAX_NO IS 'FAX번호'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.ADD_NO IS '우편번호'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.NEIGHBOR IS '동네'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.CREATION_DATE IS '생성일시'
/

COMMENT ON COLUMN KTS_DEV.PTN_INFOS.UPDATE_DATE IS '수정일시'
/


CREATE TABLE KTS_DEV.USER_INFOS
(
    USER_ID          VARCHAR2(20)     NOT NULL, 
    USER_PW          VARCHAR2(100)    NOT NULL, 
    USER_NM          VARCHAR2(60)     NOT NULL, 
    NEIGHBOR         VARCHAR2(500)    NOT NULL, 
    USER_GBN_CD      VARCHAR2(3)      NOT NULL, 
    PTN_CD           VARCHAR2(10)     NULL, 
    EMAIL            VARCHAR2(128)    NOT NULL, 
    PROFILE_PIC      VARCHAR2(200)    NULL, 
    PHONE_NUM        VARCHAR2(15)     NOT NULL, 
    PREV_PW          VARCHAR2(100)    NULL, 
    LGN_ERR_CNT      NUMBER(2)        DEFAULT 0 NOT NULL, 
    LST_LGN_DATE     DATE             NULL, 
    UNLOCK_DATE      DATE             NULL, 
    CREATION_DATE    DATE             NOT NULL, 
    UPDATE_DATE      DATE             NULL, 
    CONSTRAINT USER_INFOS_PK PRIMARY KEY (USER_ID)
)
/

COMMENT ON TABLE KTS_DEV.USER_INFOS IS '사용자정보'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.USER_ID IS '사용자ID'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.USER_PW IS '사용자PW'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.USER_NM IS '사용자명'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.NEIGHBOR IS '동네'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.USER_GBN_CD IS '사용자구분코드'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.PTN_CD IS '사업자코드'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.EMAIL IS '이메일'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.PROFILE_PIC IS '프로필사진'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.PHONE_NUM IS '휴대폰번호'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.PREV_PW IS '이전 비밀번호'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.LGN_ERR_CNT IS '로그인오류횟수'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.LST_LGN_DATE IS '최종로그인일시'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.UNLOCK_DATE IS '계정 잠김 해제일시'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.CREATION_DATE IS '생성일시'
/

COMMENT ON COLUMN KTS_DEV.USER_INFOS.UPDATE_DATE IS '수정일시'
/

-- Table Create SQL
CREATE TABLE KTS_DEV.EVENT_INFOS
(
    EVENT_SEQ        VARCHAR2(7)       NOT NULL, 
    PTN_CD           VARCHAR2(10)      NOT NULL, 
    PTN_NM           VARCHAR2(100)     NOT NULL, 
    EVENT_NM         VARCHAR2(100)     NOT NULL, 
    EVENT_DESC       VARCHAR2(1000)    NOT NULL, 
    PRODUCT          VARCHAR2(30)      NOT NULL, 
    PRODUCT_PIC      VARCHAR2(200)     NOT NULL, 
    ORIGIN_PRICE     NUMBER(10)        NOT NULL, 
    EVENT_PRICE      NUMBER(10)        NOT NULL, 
    AMOUNT           NUMBER(5)         NOT NULL, 
    EVENT_STATUS     VARCHAR2(10)      NOT NULL, 
    NEIGHBOR         VARCHAR2(500)     NOT NULL, 
    DELIVERY_YN      VARCHAR2(3)       NOT NULL, 
    CREATION_DATE    DATE              NOT NULL, 
    UPDATE_DATE      DATE              NULL, 
    CONSTRAINT EVENT_INFOS_PK PRIMARY KEY (EVENT_SEQ)
)
/

COMMENT ON TABLE KTS_DEV.EVENT_INFOS IS '이벤트정보'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.EVENT_SEQ IS '이벤트 번호'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.PTN_CD IS '사업자ID'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.PTN_NM IS '사업자 명'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.EVENT_NM IS '이벤트 명'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.EVENT_DESC IS '이벤트 내용'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.PRODUCT IS '이벤트 상품'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.PRODUCT_PIC IS '상품이미지'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.ORIGIN_PRICE IS '원 금액'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.EVENT_PRICE IS '이벤트 금액'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.AMOUNT IS '수량'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.EVENT_STATUS IS '이벤트 진행상태'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.NEIGHBOR IS '동네'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.DELIVERY_YN IS '배달가능여부'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.CREATION_DATE IS '생성일시'
/

COMMENT ON COLUMN KTS_DEV.EVENT_INFOS.UPDATE_DATE IS '수정일시'
/

CREATE INDEX EVENT_INFOS_IDX01 ON KTS_DEV.EVENT_INFOS (
    PTN_CD ASC, 
    EVENT_SEQ ASC
)
/

ALTER TABLE KTS_DEV.EVENT_INFOS
    ADD CONSTRAINT FK_EVENT_INFOS_PTN_CD_PTN_INFO FOREIGN KEY (PTN_CD)
        REFERENCES KTS_DEV.PTN_INFOS (PTN_CD)
/


-- Table Create SQL
CREATE TABLE KTS_DEV.EVENT_HIST
(
    USER_ID          VARCHAR2(20)     NOT NULL, 
    EVENT_SEQ        VARCHAR2(7)      NOT NULL, 
    PART_STATUS      VARCHAR2(5)      NOT NULL, 
    EVENT_NM         VARCHAR2(100)    NOT NULL, 
    REVIEW_YN        VARCHAR2(3)      DEFAULT 'N' NOT NULL, 
    CREATION_DATE    DATE             NOT NULL, 
    UPDATE_DATE      DATE             NULL   
)
/

COMMENT ON TABLE KTS_DEV.EVENT_HIST IS '이벤트 참여이력'
/

COMMENT ON COLUMN KTS_DEV.EVENT_HIST.USER_ID IS '사용자ID'
/

COMMENT ON COLUMN KTS_DEV.EVENT_HIST.EVENT_SEQ IS '이벤트 번호'
/

COMMENT ON COLUMN KTS_DEV.EVENT_HIST.PART_STATUS IS '참여상태'
/

COMMENT ON COLUMN KTS_DEV.EVENT_HIST.EVENT_NM IS '이벤트 명'
/

COMMENT ON COLUMN KTS_DEV.EVENT_HIST.REVIEW_YN IS '리뷰여부'
/

COMMENT ON COLUMN KTS_DEV.EVENT_HIST.CREATION_DATE IS '생성일시'
/

COMMENT ON COLUMN KTS_DEV.EVENT_HIST.UPDATE_DATE IS '수정일시'
/

ALTER TABLE KTS_DEV.EVENT_HIST
    ADD CONSTRAINT FK_EVENT_HIST_USER_ID_USER_INF FOREIGN KEY (USER_ID)
        REFERENCES KTS_DEV.USER_INFOS (USER_ID)
/

ALTER TABLE KTS_DEV.EVENT_HIST
    ADD CONSTRAINT FK_EVENT_HIST_EVENT_SEQ_EVENT_ FOREIGN KEY (EVENT_SEQ)
        REFERENCES KTS_DEV.EVENT_INFOS (EVENT_SEQ)
/


-- Table Create SQL
CREATE TABLE KTS_DEV.REVIEW_INFOS
(
    REVIEW_SEQ       VARCHAR2(7)       NOT NULL, 
    USER_ID          VARCHAR2(20)      NOT NULL, 
    EVENT_SEQ        VARCHAR2(7)       NOT NULL, 
    PTN_CD           VARCHAR2(10)      NOT NULL, 
    REVIEW_NAME      VARCHAR2(50)      NOT NULL, 
    REVIEW_DESC      VARCHAR2(1000)    NOT NULL, 
    STARS            NUMBER(3)         NOT NULL, 
    CREATION_DATE    DATE              NULL, 
    UPDATE_DATE      DATE              NULL, 
    CONSTRAINT REVIEW_INFOS_PK PRIMARY KEY (REVIEW_SEQ)
)
/

COMMENT ON TABLE KTS_DEV.REVIEW_INFOS IS '리뷰정보'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.REVIEW_SEQ IS '리뷰번호'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.USER_ID IS '사용자ID'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.EVENT_SEQ IS '이벤트 번호'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.PTN_CD IS '사업자ID'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.REVIEW_NAME IS '리뷰제목'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.REVIEW_DESC IS '리뷰내용'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.STARS IS '별점'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.CREATION_DATE IS '생성일시'
/

COMMENT ON COLUMN KTS_DEV.REVIEW_INFOS.UPDATE_DATE IS '수정일시'
/

CREATE INDEX REVIEW_INFOS_IDX01 ON KTS_DEV.REVIEW_INFOS (
    EVENT_SEQ ASC, 
    REVIEW_SEQ ASC
)
/

ALTER TABLE KTS_DEV.REVIEW_INFOS
    ADD CONSTRAINT FK_REVIEW_INFOS_USER_ID_USER_I FOREIGN KEY (USER_ID)
        REFERENCES KTS_DEV.USER_INFOS (USER_ID)
/

ALTER TABLE KTS_DEV.REVIEW_INFOS
    ADD CONSTRAINT FK_REVIEW_INFOS_EVENT_SEQ_EVEN FOREIGN KEY (EVENT_SEQ)
        REFERENCES KTS_DEV.EVENT_INFOS (EVENT_SEQ)
/

ALTER TABLE KTS_DEV.REVIEW_INFOS
    ADD CONSTRAINT FK_REVIEW_INFOS_PTN_CD_PTN_INF FOREIGN KEY (PTN_CD)
        REFERENCES KTS_DEV.PTN_INFOS (PTN_CD)
/


-- Table Create SQL
CREATE TABLE KTS_DEV.MENU_LIST
(
    USER_GBN_CD      VARCHAR2(3)      NOT NULL, 
    MENU_CD          VARCHAR2(20)     NOT NULL, 
    MENU_NM          VARCHAR2(100)    NOT NULL, 
    SERVLET_HREF     VARCHAR2(50)     NOT NULL, 
    CREATION_DATE    DATE             NOT NULL, 
    UPDATE_DATE      DATE             NULL, 
    CONSTRAINT MENU_LIST_PK PRIMARY KEY (USER_GBN_CD, MENU_CD)
)
/

COMMENT ON TABLE KTS_DEV.MENU_LIST IS '메뉴'
/

COMMENT ON COLUMN KTS_DEV.MENU_LIST.USER_GBN_CD IS '사용자구분코드'
/

COMMENT ON COLUMN KTS_DEV.MENU_LIST.MENU_CD IS '메뉴코드'
/

COMMENT ON COLUMN KTS_DEV.MENU_LIST.MENU_NM IS '메뉴명'
/

COMMENT ON COLUMN KTS_DEV.MENU_LIST.SERVLET_HREF IS '서블릿 링크'
/

COMMENT ON COLUMN KTS_DEV.MENU_LIST.CREATION_DATE IS '생성일시'
/

COMMENT ON COLUMN KTS_DEV.MENU_LIST.UPDATE_DATE IS '수정일시'
/


